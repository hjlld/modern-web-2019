(function(e){function t(t){for(var a,o,c=t[0],i=t[1],l=t[2],u=0,f=[];u<c.length;u++)o=c[u],r[o]&&f.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);m&&m(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r={app:0},s=[];function c(e){return i.p+"js/"+({"3d-model-show":"3d-model-show","ar-vr":"ar-vr",compression:"compression","compute~offscreencanvas~webassembly~webcomponents~webworker":"compute~offscreencanvas~webassembly~webcomponents~webworker",compute:"compute",offscreencanvas:"offscreencanvas",webassembly:"webassembly",webworker:"webworker",credit:"credit","easeytouse~future~performance~usage~webcomponents":"easeytouse~future~performance~usage~webcomponents",webcomponents:"webcomponents",easeytouse:"easeytouse",future:"future",performance:"performance",usage:"usage",ecosystem:"ecosystem",ecs:"ecs",framework:"framework",native:"native",thanks:"thanks",webgpu:"webgpu",webpage:"webpage"}[e]||e)+"."+{"3d-model-show":"02d71adb","ar-vr":"e2183013",compression:"45a2074d","compute~offscreencanvas~webassembly~webcomponents~webworker":"28bec255",compute:"2e492fac",offscreencanvas:"74f8c354",webassembly:"2e5eddd5",webworker:"470f01e9",credit:"c6b64e89","easeytouse~future~performance~usage~webcomponents":"8fe27748",webcomponents:"828e237e",easeytouse:"0bf80b7e",future:"b65318a8",performance:"f6dac960",usage:"1b3bf49a",ecosystem:"3f5e8e79",ecs:"4f61ee8c",framework:"57c2182b",native:"60655be8",thanks:"674ec4e2",webgpu:"805020b3",webpage:"20805efa"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"3d-model-show":1,"ar-vr":1,compression:1,"compute~offscreencanvas~webassembly~webcomponents~webworker":1,compute:1,webcomponents:1,easeytouse:1,future:1,performance:1,usage:1,thanks:1,webpage:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({"3d-model-show":"3d-model-show","ar-vr":"ar-vr",compression:"compression","compute~offscreencanvas~webassembly~webcomponents~webworker":"compute~offscreencanvas~webassembly~webcomponents~webworker",compute:"compute",offscreencanvas:"offscreencanvas",webassembly:"webassembly",webworker:"webworker",credit:"credit","easeytouse~future~performance~usage~webcomponents":"easeytouse~future~performance~usage~webcomponents",webcomponents:"webcomponents",easeytouse:"easeytouse",future:"future",performance:"performance",usage:"usage",ecosystem:"ecosystem",ecs:"ecs",framework:"framework",native:"native",thanks:"thanks",webgpu:"webgpu",webpage:"webpage"}[e]||e)+"."+{"3d-model-show":"c54db602","ar-vr":"c54db602",compression:"99ca5d60","compute~offscreencanvas~webassembly~webcomponents~webworker":"1b56cd89",compute:"a3fe9ee3",offscreencanvas:"31d6cfe0",webassembly:"31d6cfe0",webworker:"31d6cfe0",credit:"31d6cfe0","easeytouse~future~performance~usage~webcomponents":"31d6cfe0",webcomponents:"1b5f014c",easeytouse:"fe7b55a4",future:"62187de6",performance:"eb9a5e18",usage:"b4dc16f4",ecosystem:"31d6cfe0",ecs:"31d6cfe0",framework:"31d6cfe0",native:"31d6cfe0",thanks:"8ded46bf",webgpu:"31d6cfe0",webpage:"c54db602"}[e]+".css",r=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=s[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===r))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){l=f[c],u=l.getAttribute("data-href");if(u===a||u===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[e],m.parentNode.removeChild(m),n(s)},m.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(m)}).then(function(){o[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e),l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");s.type=a,s.request=o,n[1](s)}r[e]=void 0}};var f=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/modern-web-2019/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var m=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("1356"),o=n.n(a);o.a},1356:function(e,t,n){},"39ff":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});class a{static Get(e,t,n){let a=new URLSearchParams;return t&&Object.keys(t).forEach(e=>a.append(e,t[e])),fetch("/modern-web-2019/".slice(0,"/modern-web-2019/".length-1)+e,a).then(e=>{if(e.status>=400)throw new Error("Bad response from server!");return e}).then(e=>{switch(n){case"arrayBuffer":return e.arrayBuffer();case"blob":return e.blob();case"text":return e.text();case"json":default:return e.json()}})}}const o=1024;class r{constructor(){let e=document.createElement("canvas");this.context=e.getContext("webgl2-compute");const t=this.initializeComputeProgram();if(!t)throw new Error("Cannot initialize compute program!")}compute(e){const t=performance.now(),n=e.length,a=Math.max(1,n/o),r=this.context.createBuffer();if(this.context.bindBuffer(this.context.SHADER_STORAGE_BUFFER,r),this.context.bufferData(this.context.SHADER_STORAGE_BUFFER,e,this.context.DYNAMIC_COPY),this.context.bindBufferBase(this.context.SHADER_STORAGE_BUFFER,0,r),this.context.useProgram(this.bitonicSortProgram1),this.context.dispatchCompute(a,1,1),this.context.memoryBarrier(this.context.SHADER_STORAGE_BARRIER_BIT),a>1)for(let o=a;o<=n;o<<=1)for(let e=o>>1;e>0;e>>=1)this.context.useProgram(this.bitonicSortProgram2),this.context.uniform4uiv(this.bitonicSortProgram2UniformLocation,new Uint32Array([o,e,0,0])),this.context.dispatchCompute(a,1,1),this.context.memoryBarrier(this.context.SHADER_STORAGE_BARRIER_BIT);const s=new Float32Array(n);this.context.getBufferSubData(this.context.SHADER_STORAGE_BUFFER,0,s);const c=performance.now()-t;return{array:s,costTime:c}}initializeComputeProgram(){const e=`#version 310 es\n          layout (local_size_x = ${o}, local_size_y = 1, local_size_z = 1) in;\n          layout (std430, binding = 0) buffer SSBO {\n            float data[];\n          } ssbo;\n          shared float sharedData[${o}];\n          \n          void main() {\n            sharedData[gl_LocalInvocationID.x] = ssbo.data[gl_GlobalInvocationID.x];\n            memoryBarrierShared();\n            barrier();\n            \n            uint offset = gl_WorkGroupID.x * gl_WorkGroupSize.x;\n            \n            float tmp;\n            for (uint k = 2u; k <= gl_WorkGroupSize.x; k <<= 1) {\n              for (uint j = k >> 1; j > 0u; j >>= 1) {\n                uint ixj = (gl_GlobalInvocationID.x ^ j) - offset;\n                if (ixj > gl_LocalInvocationID.x) {\n                  if ((gl_GlobalInvocationID.x & k) == 0u) {\n                    if (sharedData[gl_LocalInvocationID.x] > sharedData[ixj]) {\n                      tmp = sharedData[gl_LocalInvocationID.x];\n                      sharedData[gl_LocalInvocationID.x] = sharedData[ixj];\n                      sharedData[ixj] = tmp;\n                    }\n                  }\n                  else\n                  {\n                    if (sharedData[gl_LocalInvocationID.x] < sharedData[ixj]) {\n                      tmp = sharedData[gl_LocalInvocationID.x];\n                      sharedData[gl_LocalInvocationID.x] = sharedData[ixj];\n                      sharedData[ixj] = tmp;\n                    }\n                  }\n                }\n                memoryBarrierShared();\n                barrier();\n              }\n            }\n            ssbo.data[gl_GlobalInvocationID.x] = sharedData[gl_LocalInvocationID.x];\n          }\n          `;if(this.bitonicSortProgram1=this.createComputeProgram(e),!this.bitonicSortProgram1)return!1;const t=`#version 310 es\n          layout (local_size_x = ${o}, local_size_y = 1, local_size_z = 1) in;\n          layout (std430, binding = 0) buffer SSBO {\n            float data[];\n          } ssbo;\n          uniform uvec4 numElements;\n          \n          void main() {\n             float tmp;\n            uint ixj = gl_GlobalInvocationID.x ^ numElements.y;\n            if (ixj > gl_GlobalInvocationID.x)\n            {\n              if ((gl_GlobalInvocationID.x & numElements.x) == 0u)\n              {\n                if (ssbo.data[gl_GlobalInvocationID.x] > ssbo.data[ixj])\n                {\n                  tmp = ssbo.data[gl_GlobalInvocationID.x];\n                  ssbo.data[gl_GlobalInvocationID.x] = ssbo.data[ixj];\n                  ssbo.data[ixj] = tmp;\n                }\n              }\n              else\n              {\n                if (ssbo.data[gl_GlobalInvocationID.x] < ssbo.data[ixj])\n                {\n                  tmp = ssbo.data[gl_GlobalInvocationID.x];\n                  ssbo.data[gl_GlobalInvocationID.x] = ssbo.data[ixj];\n                  ssbo.data[ixj] = tmp;\n                }\n              }\n            }\n          }\n          `;return this.bitonicSortProgram2=this.createComputeProgram(t),!!this.bitonicSortProgram2&&(this.bitonicSortProgram2UniformLocation=this.context.getUniformLocation(this.bitonicSortProgram2,"numElements"),!0)}createComputeProgram(e){const t=this.context.createShader(this.context.COMPUTE_SHADER);if(this.context.shaderSource(t,e),this.context.compileShader(t),!this.context.getShaderParameter(t,this.context.COMPILE_STATUS))return console.log(this.context.getShaderInfoLog(t)),null;const n=this.context.createProgram();return this.context.attachShader(n,t),this.context.linkProgram(n),this.context.getProgramParameter(n,this.context.LINK_STATUS)?n:(console.log(this.context.getProgramInfoLog(n)),null)}}},4382:function(e,t,n){},"52be":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"__Shader_Background_container",staticClass:"canvas-container"},[n("canvas",{ref:"__Shader_Background_renderCanvas",staticClass:"render-canvas"})])},o=[],r=n("fbb9"),s=r["a"],c=(n("ae0b"),n("2877")),i=Object(c["a"])(s,a,o,!1,null,"3310299d",null);t["a"]=i.exports},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticStyle:{background:"none"}},[n("v-app-bar",{attrs:{app:"",collapse:!e.ifShowDrawer,color:"primary","clipped-left":""}},[n("v-app-bar-nav-icon",{attrs:{color:"secondary"},on:{click:function(t){t.stopPropagation(),e.ifShowDrawer=!e.ifShowDrawer}}}),n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",{staticClass:"white--text"},[e._v("請在網頁中使用 3D")]),n("span",{staticClass:"font-weight-light grey--text text--lighten-2 subtitle-2 pl-3"},[e._v("HiWebGL")])]),n("v-spacer")],1),n("v-navigation-drawer",{attrs:{app:"",left:"",clipped:""},model:{value:e.ifShowDrawer,callback:function(t){e.ifShowDrawer=t},expression:"ifShowDrawer"}},[n("v-list",{attrs:{shaped:""}},e._l(e.contentTable,function(t,a){return n("v-list-item-group",{key:a,attrs:{value:e.currentSelected(a)}},[n("v-subheader",[e._v(e._s(t.mainTitle))]),e._l(t.slides,function(t,o){return n("v-list-item",{key:o,attrs:{inset:""},on:{click:function(t){return e.jump(a,o)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1)],1)})],2)}),1)],1),n("router-view")],1)},r=[],s=n("39ff"),c={name:"App",data:()=>({ifShowDrawer:!1,contentTable:[{mainTitle:"",slides:[{title:""}]}],chapterIndex:0,slideIndex:0}),created:async function(){this.contentTable=await s["b"].Get("/ContentTable.json");for(let e=0;e<this.contentTable.length;e++)for(let t=0,n=this.contentTable[e].slides;t<n.length;t++)if(n[t].path===this.$route.path){this.chapterIndex=e,this.slideIndex=t;break}window.addEventListener("keyup",e=>{"ArrowRight"===e.key&&this.next(),"ArrowLeft"===e.key&&this.previous()},!1)},methods:{jump(e,t){this.chapterIndex=e,this.slideIndex=t,this.$router.push({path:this.contentTable[this.chapterIndex].slides[this.slideIndex].path})},currentSelected(e){return this.chapterIndex===e&&this.slideIndex},next(){this.slideIndex===this.contentTable[this.chapterIndex].slides.length-1?(this.chapterIndex===this.contentTable.length-1?this.chapterIndex=0:this.chapterIndex++,this.slideIndex=0):this.slideIndex++,this.$router.push({path:this.contentTable[this.chapterIndex].slides[this.slideIndex].path})},previous(){if(0===this.slideIndex){if(0===this.chapterIndex)return;this.chapterIndex--,this.slideIndex=this.contentTable[this.chapterIndex].slides.length-1}else this.slideIndex--;this.$router.push({path:this.contentTable[this.chapterIndex].slides[this.slideIndex].path})}}},i=c,l=(n("034f"),n("2877")),u=n("6544"),f=n.n(u),m=n("7496"),p=n("40dc"),d=n("5bc1"),h=n("132d"),b=n("8860"),w=n("da13"),g=n("5d23"),v=n("1baa"),x=n("34c3"),y=n("f774"),_=n("2fa4"),I=n("e0c7"),k=n("2a7f"),S=Object(l["a"])(i,o,r,!1,null,null,null),D=S.exports;f()(S,{VApp:m["a"],VAppBar:p["a"],VAppBarNavIcon:d["a"],VIcon:h["a"],VList:b["a"],VListItem:w["a"],VListItemContent:g["a"],VListItemGroup:v["a"],VListItemIcon:x["a"],VListItemTitle:g["b"],VNavigationDrawer:y["a"],VSpacer:_["a"],VSubheader:I["a"],VToolbarTitle:k["a"]});var P=n("8c4f");n("bb51");a["a"].use(P["a"]);var j=new P["a"]({mode:"history",base:"/modern-web-2019/",routes:[{path:"/",name:"home",component:()=>Promise.resolve().then(n.bind(null,"bb51"))},{path:"/usage/",name:"usage",component:()=>Promise.all([n.e("easeytouse~future~performance~usage~webcomponents"),n.e("usage")]).then(n.bind(null,"69ef"))},{path:"/usage/3d-model-show",name:"3d-model-show",component:()=>n.e("3d-model-show").then(n.bind(null,"e98e"))},{path:"/usage/ar-vr",name:"ar-vr",component:()=>n.e("ar-vr").then(n.bind(null,"1c17"))},{path:"/usage/webpage",name:"webpage",component:()=>n.e("webpage").then(n.bind(null,"326c"))},{path:"/usage/compute",name:"compute",component:()=>Promise.all([n.e("compute~offscreencanvas~webassembly~webcomponents~webworker"),n.e("compute")]).then(n.bind(null,"8ad3"))},{path:"/performance",name:"performance",component:()=>Promise.all([n.e("easeytouse~future~performance~usage~webcomponents"),n.e("performance")]).then(n.bind(null,"8c15"))},{path:"/performance/offscreencanvas",name:"offscreencanvas",component:()=>Promise.all([n.e("compute~offscreencanvas~webassembly~webcomponents~webworker"),n.e("offscreencanvas")]).then(n.bind(null,"d0f2"))},{path:"/performance/webworker",name:"webworker",component:()=>Promise.all([n.e("compute~offscreencanvas~webassembly~webcomponents~webworker"),n.e("webworker")]).then(n.bind(null,"9a91"))},{path:"/performance/webassembly",name:"webassembly",component:()=>Promise.all([n.e("compute~offscreencanvas~webassembly~webcomponents~webworker"),n.e("webassembly")]).then(n.bind(null,"695a"))},{path:"/performance/compression",name:"compression",component:()=>n.e("compression").then(n.bind(null,"509f"))},{path:"/easytouse",name:"easeytouse",component:()=>Promise.all([n.e("easeytouse~future~performance~usage~webcomponents"),n.e("easeytouse")]).then(n.bind(null,"c553"))},{path:"/easytouse/webcomponents",name:"webcomponents",component:()=>Promise.all([n.e("easeytouse~future~performance~usage~webcomponents"),n.e("compute~offscreencanvas~webassembly~webcomponents~webworker"),n.e("webcomponents")]).then(n.bind(null,"128a"))},{path:"/easytouse/framework",name:"framework",component:()=>n.e("framework").then(n.bind(null,"f6dc"))},{path:"/easytouse/ecs",name:"ecs",component:()=>n.e("ecs").then(n.bind(null,"2e8d"))},{path:"/easytouse/ecosystem",name:"ecosystem",component:()=>n.e("ecosystem").then(n.bind(null,"6615"))},{path:"/future",name:"future",component:()=>Promise.all([n.e("easeytouse~future~performance~usage~webcomponents"),n.e("future")]).then(n.bind(null,"0fc8"))},{path:"/future/webgpu",name:"webgpu",component:()=>n.e("webgpu").then(n.bind(null,"e167"))},{path:"/future/native",name:"native",component:()=>n.e("native").then(n.bind(null,"3b2d"))},{path:"/credit",name:"credit",component:()=>n.e("credit").then(n.bind(null,"b7b2"))},{path:"/thanks",name:"thanks",component:()=>n.e("thanks").then(n.bind(null,"358a"))}]}),E=n("f309"),T=n("aa47"),C=n.n(T);a["a"].use(E["a"]);var R=new E["a"]({theme:{themes:{light:{primary:"#e91e63",secondary:"#ffffff",accent:"#9c27b0",error:"#f44336",warning:"#ffc107",info:"#4caf50",success:"#8bc34a"}}},lang:{locales:{zhHant:C.a},current:"zh-Hant"},icons:{iconfont:"fa"}});n("d5e8"),n("15f5");a["a"].config.productionTip=!1,new a["a"]({router:j,vuetify:R,render:e=>e(D)}).$mount("#app")},"7bd1":function(e,t,n){e.exports=n.p+"js/OffscreenShaderRenderer-Worker.bae4b6a7.worker.js"},"98ec":function(e,t,n){},ae0b:function(e,t,n){"use strict";var a=n("98ec"),o=n.n(a);o.a},bb51:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",{staticClass:"ma-0 pa-0"},[n("v-container",{attrs:{"grid-list-xs":"","fill-height":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":"","align-center":"","align-content-center":""}},[n("v-flex",{staticClass:"display-4 font-weight-bold text-center vfx-text",attrs:{xs12:""}},[e._v("\n                請在網頁中使用 3D\n            ")])],1)],1),n("shader-background",{attrs:{id:"2DCloud"}})],1)},o=[],r=n("52be"),s={components:{"shader-background":r["a"]}},c=s,i=(n("dbff"),n("2877")),l=n("6544"),u=n.n(l),f=n("a523"),m=n("a75b"),p=n("0e8f"),d=n("a722"),h=Object(i["a"])(c,a,o,!1,null,"7bb9fd89",null);t["default"]=h.exports;u()(h,{VContainer:f["a"],VContent:m["a"],VFlex:p["a"],VLayout:d["a"]})},dbff:function(e,t,n){"use strict";var a=n("4382"),o=n.n(a);o.a},fbb9:function(e,t,n){"use strict";(function(e){n("39ff");var a=n("3d15");t["a"]={data:()=>({offscreenShaderRenderer:void 0}),props:{id:{type:String,required:!0}},mounted:async function(){let t=this.$refs.__Shader_Background_container,n=t.parentElement;n.style.position="relative";let o=this.$refs.__Shader_Background_renderCanvas,r=o.transferControlToOffscreen(),s=Object(a["b"])(new Worker(e,{name:"OffscreenShaderRenderer-Worker"}));this.offscreenShaderRenderer=await new s(this.id,Object(a["a"])(r,[r]),o.clientWidth,o.clientHeight),this.offscreenShaderRenderer.initShader().then(()=>{this.offscreenShaderRenderer.startRender()})},beforeDestroy:async function(){this.offscreenShaderRenderer&&await this.offscreenShaderRenderer.close()}}}).call(this,n("7bd1"))}});
//# sourceMappingURL=app.efaf467c.js.map